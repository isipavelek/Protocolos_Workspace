/*
 * API_encoder.c
 *
 *  Created on: 1 abr. 2023
 *      Author: ipave
 */

#include "API_encoder.h"
#include "API_enc_port.h"


static uint8_t estado=INICIAL;

typedef struct{
	uint8_t EstadoCanalA:1;
	uint8_t EstadoCanalB:1;
	uint8_t EstadoPrevCanalA:1;
	uint8_t EstadoPrevCanalB:1;

}StateEncoder_t;

delay_t encoder_time;

_Bool Init_Enc(void){
	Init_Enc_port();
	estado=INICIAL;
	StateEncoder_t.EstadoCanalA=false;
	StateEncoder_t.EstadoCanalB=false;
	StateEncoder_t.EstadoPrevCanalA=false;
	StateEncoder_t.EstadoPrevCanalB=false;
    delayInit(&encoder_time,DEMORA_BASE);

	return 0;
}

void EncUpdate(){

//	if(delayRead(&estructura_tiempo)){
		switch (estado){
			case (INICIAL):
						if(Leer_Enc_Pin()==0)estado=E00;

					break;
			case (B):
					break;
			case (C):
					break;
			case (D):

					break;


			}
	//}
}
